{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}{{ user.username }}{% endblock %}

{% block script %}
  <script type="text/javascript">
    function fMasc(objeto,mascara) {
      obj=objeto
      masc=mascara
      setTimeout("fMascEx()",1)
    }
    function fMascEx() {
      obj.value=masc(obj.value)
    }
    function mTel(tel) {
      tel=tel.replace(/\D/g,"")
      tel=tel.replace(/^(\d)/,"($1")
      tel=tel.replace(/(.{3})(\d)/,"$1)$2")
      if(tel.length == 9) {
        tel=tel.replace(/(.{1})$/,"-$1")
      } else if (tel.length == 10) {
        tel=tel.replace(/(.{2})$/,"-$1")
      } else if (tel.length == 11) {
        tel=tel.replace(/(.{3})$/,"-$1")
      } else if (tel.length == 12) {
        tel=tel.replace(/(.{4})$/,"-$1")
      } else if (tel.length > 12) {
        tel=tel.replace(/(.{4})$/,"-$1")
      }
      return tel;
    }
  </script>
{% endblock %}
 
{% block content %}
<div class="col-md-6 offset-md-3">
  <h1>{{ user.username }}</h1>
  <form class="form-horizontal" method="post" action="{% url 'users:update' %}" enctype="multipart/form-data">
    {% csrf_token %} 
 
    {{ form.name  |as_crispy_field }}
    {{ form.gender  |as_crispy_field }}

    <div id="div_id_telephone" class="form-group">        
      <label for="id_telephone" class="col-form-label  requiredField">
          {% trans 'Telephone' %}<span class="asteriskField">*</span>
      </label>            
      <div class="">
          <input type="text" name="telephone" value= "" maxlength="14" class="textinput textInput form-control" required id="id_telephone" onkeydown="javascript: fMasc( this, mTel );" />
          <small id="hint_id_telephone" class="form-text text-muted">(xx)xxxxx-xxxx or (xx)xxxx-xxxx</small>
      </div>
    </div>
 
    <label>Birthday* </label>
 
    <input type="date"  name="birthday" required=true class="form-control">
    <span class="validity"></span>
 
    {{ form.photo  |as_crispy_field }} 

    <div class="control-group">
      <div class="controls">
        <button type="submit" class="btn btn-success">{% trans 'Update' %}</button>
      </div>
    </div>
  </form>
</div> 
{% endblock %}